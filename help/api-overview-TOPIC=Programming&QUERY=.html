<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
	<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
	<TITLE>Introduction to CUPS Programming  - CUPS 1.6.2</TITLE>
	<LINK REL="STYLESHEET" TYPE="text/css" HREF="../cups.css">
	<LINK REL="SHORTCUT ICON" HREF="http://www.math.dartmouth.edu:631/images/cups-icon.png" TYPE="image/png">
	
</HEAD>
<BODY>
<TABLE CLASS="page" SUMMARY="Introduction to CUPS Programming ">
<TR><TD CLASS="body">
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" SUMMARY="">
<TR HEIGHT="36">
<TD><A HREF="http://www.cups.org/" TARGET="_blank"><IMG
SRC="http://www.math.dartmouth.edu:631/images/left.gif" WIDTH="64" HEIGHT="36" BORDER="0" ALT=""></A></TD>
<TD CLASS="unsel"><A HREF="../index.html">&nbsp;&nbsp;Home&nbsp;&nbsp;</A></TD>
<TD CLASS="unsel"><A HREF="http://www.math.dartmouth.edu:631/admin">&nbsp;&nbsp;Administration&nbsp;&nbsp;</A></TD>
<TD CLASS="unsel"><A HREF="../classes/index.html">&nbsp;&nbsp;Classes&nbsp;&nbsp;</A></TD>
<TD CLASS="sel"><A HREF="index.html">&nbsp;&nbsp;Online&nbsp;Help&nbsp;&nbsp;</A></TD>
<TD CLASS="unsel"><A HREF="../jobs/index.html">&nbsp;&nbsp;Jobs&nbsp;&nbsp;</A></TD>
<TD CLASS="unsel"><A HREF="../printers/index.html">&nbsp;&nbsp;Printers&nbsp;&nbsp;</A></TD>
<TD CLASS="unsel" WIDTH="100%"><FORM ACTION="/help/" METHOD="GET"><INPUT
TYPE="SEARCH" NAME="QUERY" SIZE="20" PLACEHOLDER="Search Help"
VALUE="" AUTOSAVE="org.cups.help" RESULTS="20"></FORM></TD>
<TD><IMG SRC="http://www.math.dartmouth.edu:631/images/right.gif" WIDTH="4" HEIGHT="36" ALT=""></TD>
</TR>
<TR><TD COLSPAN="9">&nbsp;</TD></TR>
</TABLE>
<DIV CLASS="indent">
<FORM ACTION="/help/api-overview.html" METHOD="GET">
<INPUT TYPE="HIDDEN" NAME="TOPIC" VALUE="Programming">

<P ALIGN="CENTER"><B>Search in
Introduction to CUPS Programming :</B> <INPUT
TYPE="SEARCH" NAME="QUERY" VALUE="" SIZE="40" PLACEHOLDER=""
AUTOSAVE="org.cups.help" RESULTS="20">
<INPUT TYPE="SUBMIT" NAME="SEARCH" VALUE="Search">
<INPUT TYPE="SUBMIT" NAME="CLEAR" VALUE="Clear"></P>

</FORM>

<!-- Bookmarks -->
<DIV CLASS="sidebar"><TABLE CLASS="inset" SUMMARY="Contents">
<TR><TD>

<H3 CLASS="title">Online Help Documents</H3>

<P CLASS="l0"><A HREF="index.html">All Documents</A></P>
<HR>

<P CLASS="l0"><A HREF="index-TOPIC=Getting+Started&QUERY=.html">Getting Started</A></P>
<P CLASS="l0"><A HREF="index-TOPIC=Man+Pages&QUERY=.html">Man Pages</A></P>
<P CLASS="l0"><A HREF="index-TOPIC=Programming&QUERY=.html">Programming</A></P>
<P CLASS="l1"><A HREF="api-array-TOPIC=Programming&QUERY=.html">Array API </A></P>
<P CLASS="l1"><A HREF="api-cgi-TOPIC=Programming&QUERY=.html">CGI API </A></P>
<P CLASS="l1"><A HREF="api-cups-TOPIC=Programming&QUERY=.html">CUPS API </A></P>
<P CLASS="l1"><A HREF="postscript-driver-TOPIC=Programming&QUERY=.html">Developing PostScript Printer Drivers </A></P>
<P CLASS="l1"><A HREF="raster-driver-TOPIC=Programming&QUERY=.html">Developing Raster Printer Drivers </A></P>
<P CLASS="l1"><A HREF="api-filedir-TOPIC=Programming&QUERY=.html">File and Directory APIs </A></P>
<P CLASS="l1"><A HREF="api-filter-TOPIC=Programming&QUERY=.html">Filter and Backend Programming </A></P>
<P CLASS="l1"><A HREF="api-httpipp-TOPIC=Programming&QUERY=.html">HTTP and IPP APIs </A></P>
<P CLASS="l1"><A HREF="api-overview-TOPIC=Programming&QUERY=.html">Introduction to CUPS Programming </A></P>
<P CLASS="l2"><A HREF="api-overview-TOPIC=Programming&QUERY=.html#COMPILING">Compiling Programs</A></P>
<P CLASS="l2"><A HREF="api-overview-TOPIC=Programming&QUERY=.html#COMMANDLINE">Compiling with GCC</A></P>
<P CLASS="l2"><A HREF="api-overview-TOPIC=Programming&QUERY=.html#XCODE">Compiling with Xcode</A></P>
<P CLASS="l2"><A HREF="api-overview-TOPIC=Programming&QUERY=.html#OVERVIEW">Overview</A></P>
<P CLASS="l2"><A HREF="api-overview-TOPIC=Programming&QUERY=.html#WHERETOGO">Where to Go Next</A></P>
<P CLASS="l1"><A HREF="ppd-compiler-TOPIC=Programming&QUERY=.html">Introduction to the PPD Compiler </A></P>
<P CLASS="l1"><A HREF="api-mime-TOPIC=Programming&QUERY=.html">MIME API </A></P>
<P CLASS="l1"><A HREF="api-ppd-TOPIC=Programming&QUERY=.html">PPD API (DEPRECATED) </A></P>
<P CLASS="l1"><A HREF="api-ppdc-TOPIC=Programming&QUERY=.html">PPD Compiler API </A></P>
<P CLASS="l1"><A HREF="api-driver-TOPIC=Programming&QUERY=.html">Printer Driver API </A></P>
<P CLASS="l1"><A HREF="api-raster-TOPIC=Programming&QUERY=.html">Raster API </A></P>
<P CLASS="l0"><A HREF="index-TOPIC=References&QUERY=.html">References</A></P>
<P CLASS="l0"><A HREF="index-TOPIC=Specifications&QUERY=.html">Specifications</A></P>

</TD></TR>
</TABLE></DIV>


<H1>Introduction to CUPS Programming </H1>
<FORM ACTION="/help/api-overview.html" METHOD="GET"><INPUT TYPE="HIDDEN" NAME="PRINTABLE" VALUE="YES"><INPUT TYPE="SUBMIT" VALUE="View Printable Version"></FORM>
<div class='body'>
<!--
  "$Id: api-overview.html 9772 2011-05-12 05:46:30Z mike $"

  Introduction to CUPS programming header for CUPS.

  Copyright 2008-2011 by Apple Inc.

  These coded instructions, statements, and computer programs are the
  property of Apple Inc. and are protected by Federal copyright
  law.  Distribution and use rights are outlined in the file "LICENSE.txt"
  which should have been included with this file.  If this file is
  file is missing or damaged, see the license at "http://www.cups.org/".
-->

<h1 class='title'>Introduction to CUPS Programming</h1>

<div class='summary'><table summary='General Information'>
<thead>
<tr>
	<th>Headers</th>
	<th>cups/cups.h<br>
	cups/array.h<br>
	cups/backend.h<br>
	cups/dir.h<br>
	cups/file.h<br>
	cups/ppd.h<br>
	cups/raster.h<br>
	cups/sidechannel.h</th>
</tr>
</thead>
<tbody>
<tr>
	<th>Libraries</th>
	<td>-lcups<br>
	-lcupsimage</td>
</tr>
<tr>
	<th>See Also</th>
	<td>Programming: <a href='raster-driver.html' target='_top'>Developing Raster Printer Drivers</a><br>
	Programming: <a href='postscript-driver.html' target='_top'>Developing PostScript Printer Drivers</a><br>
	Programming: <a href='api-filter.html' target='_top'>Filter and Backend Programming</a><br>
	Programming: <a href='ppd-compiler.html' target='_top'>Introduction to the PPD Compiler</a><br>
	Programming: <a href='api-array.html' target='_top'>Array API</a><br>
	Programming: <a href='api-cups.html' target='_top'>CUPS API</a><br>
	Programming: <a href='api-filedir.html' target='_top'>File and Directory APIs</a><br>
	Programming: <a href='api-httpipp.html' target='_top'>HTTP and IPP APIs</a><br>
	Programming: <a href='api-ppd.html' target='_top'>PPD API</a><br>
	Programming: <a href='api-raster.html' target='_top'>Raster API</a><br>
	References: <a href='ref-ppdcfile.html' target='_top'>PPD Compiler Driver Information File Reference</a><br>
	Specifications: <a href='spec-ppd.html' target='_top'>CUPS PPD Extensions</a></td>
</tr>
</tbody>
</table></div>
<h2 class="title">Contents</h2>
<ul class="contents">
<li><a href="api-overview-TOPIC=Programming&QUERY=.html#OVERVIEW">Overview</a></li>
<li><a href="api-overview-TOPIC=Programming&QUERY=.html#COMPILING">Compiling Programs</a><ul class="subcontents">
	<li><a href="api-overview-TOPIC=Programming&QUERY=.html#XCODE">Compiling with Xcode</a></li>
	<li><a href="api-overview-TOPIC=Programming&QUERY=.html#COMMANDLINE">Compiling with GCC</a></li>
</ul></li>
<li><a href="api-overview-TOPIC=Programming&QUERY=.html#WHERETOGO">Where to Go Next</a></li>
</ul>
<!--
  "$Id: api-overview.html 9772 2011-05-12 05:46:30Z mike $"

  Introduction to CUPS programming content for CUPS.

  Copyright 2008-2011 by Apple Inc.

  These coded instructions, statements, and computer programs are the
  property of Apple Inc. and are protected by Federal copyright
  law.  Distribution and use rights are outlined in the file "LICENSE.txt"
  which should have been included with this file.  If this file is
  file is missing or damaged, see the license at "http://www.cups.org/".
-->

<h2 class="title"><a name="OVERVIEW">Overview</a></h2>

<p>CUPS provides two libraries that interface with the different parts of the
printing system. The "cups" library provides all of the common application and
filter functions while the "cupsimage" library provides all of the imaging
functions used in raster printer drivers. The "cups" library functions are
accessed by including the <var>&lt;cups/cups.h&gt;</var> header, while
"cupsimage" functions are found in the <var>&lt;cups/raster.h&gt;</var>
header.</p>

<h2 class="title"><a name="COMPILING">Compiling Programs</a></h2>

<p>The CUPS libraries can be used from any C, C++, or Objective C program.
The method of compiling against the libraries varies depending on the
operating system and installation of CUPS. The following sections show how
to compile a simple program (shown below) in two common environments.</p>

<p>The following simple program lists the available printers on the system:</p>

<pre class="example">
#include &lt;stdio.h&gt;
#include &lt;cups/cups.h&gt;

int main(void)
{
  int i;
  cups_dest_t *dests, *dest;
  int num_dests = cupsGetDests(&amp;dests);

  for (i = num_dests, dest = dests; i &gt; 0; i --, dest ++)
  {
    if (dest->instance)
      printf("%s/%s\n", dest->name, dest->instance);
    else
      puts(dest->name);
  }

  return (0);
}
</pre>

<h3><a name="XCODE">Compiling with Xcode</a></h3>

<p>In Xcode, choose <var>New Project...</var> from the <var>File</var> menu,
then select the <var>Standard Tool</var> project type under <var>Command Line
Utility</var>. Click <var>Next</var> and choose a project directory. Click
<var>Next</var> to create the project.</p>

<p>In the project window, double-click on the <var>Targets</var> group and
control-click on the simple target to show the context menu. Choose
<var>Existing Framework...</var> from the <var>Add</var> submenu. When the file
chooser sheet appears, press the <kbd>/</kbd> key and enter "/usr/lib". Scroll
down the file list and select the <var>libcups.dylib</var> file. Click the
<var>Add</var> button in the file chooser and attributes sheets.</p>

<p>In the project window, double-click on the <var>main.c</var> source file.
Replace the template source code with the listing above and save it. Click the
<var>Build and Go</var> button to build the sample program and run it.</p>

<h3><a name="COMMANDLINE">Compiling with GCC</a></h3>

<p>From the command-line, create a file called <var>sample.c</var> using your
favorite editor and then run the following command to compile it with GCC and
run it:</p>

<pre class="command">
gcc -o simple `cups-config --cflags` simple.c `cups-config --libs`
./simple
</pre>

<p>The <code>cups-config</code> command provides the compiler flags
("cups-config --cflags") and libraries ("cups-config --libs") needed for the
local system.</p>

<h2 class="title"><a name="WHERETOGO">Where to Go Next</a></h2>

<p>If you are developing a print filter, driver, or backend, see the
<a href="api-filter.html" target="_top">Filter and Backend Programming</a>
guide. Raster printer driver developers should also read the
<a href="api-raster.html" target="_top">Raster API</a> reference.</p>
</div>
</DIV>
</TD></TR>
<TR><TD>&nbsp;</TD></TR>
<TR><TD CLASS="trailer">CUPS and the CUPS logo are trademarks of
<A HREF="http://www.apple.com">Apple Inc.</A> Copyright 2007-2013 Apple
Inc. All rights reserved.</TD></TR>
</TABLE>
</BODY>
</HTML>
