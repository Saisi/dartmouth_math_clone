<html><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>CLTStreak.html</title><!-- Created by Maple 7.00, APPLE_PPC_MAC --></head><body bgcolor="FFFFFF"><basefont size=3><a name="MapleAutoBookmark1"><p align=left><tt>&gt; </tt><b><font color=#FF0000>"By hitting return you will load a hopefully useful histogram making program allowing to easily analyze data given as a list of experimentally<br>determined values.":<br><br>with(stats):<br>with(stats[statplots]):<br>Convert:=proc(data)<br>local hap,hap1,d,j1,j2,j3,mean; <br>hap:=[];<br>hap1:=[];<br>d:=[];<br>for j1 from 1 to nops(data)<br>do <br>hap:=[op(hap),data[j1][2]];<br>od;<br>mean := nops(data)*describe[mean](hap);<br>for j2 from 1 to nops(data)<br>do <br>hap1:=[op(hap1), hap[j2]/mean];<br>od;<br>for j3 from 1 to nops(data)<br>do <br>d:=[op(d), [data[j3][1],hap1[j3]]];<br>od;<br>d;<br>end:<br>Bargraph:=proc(data,xmin,xmax,k)<br>local sorteddata,dx,graphicslist,f:<br>sorteddata:=[]:<br>dx:=(xmax-xmin)/k:<br>graphicslist:=[]:<br>sorteddata:=sort(data):<br>if ((op(1,sorteddata)&lt;xmin) or (op(nops(sorteddata),sorteddata)&gt;xmax))<br>then<br>lprint(`Note: some data values lie outside the user-defined interval.`): <br>fi:<br>f:=proc(k,sorteddata,xmin,dx,xmax)<br>local i,j,currentupperlim,leng,index,counter,result,finallist,q,numb,<br>linelist:<br>linelist:=[]: finallist:=[]:<br>index:=1:<br>leng:=nops(sorteddata):<br>currentupperlim:=xmin+dx:<br>result:=[]:<br>for q from 1 to leng do<br>if ((op(q,sorteddata)&gt;=xmin) and (op(q,sorteddata)&lt;=xmax)) <br>then finallist:=[op(finallist),op(q,sorteddata)]<br>fi:<br>od:<br>numb:=nops(finallist):<br>for i from 1 to k do<br>counter:=0:<br>while ((index&lt;=numb) and (op(index,finallist)&lt;=currentupperlim)) do<br>counter:=counter+1:<br>index:=index+1:<br>od:<br>result:=[op(result),counter]:<br>currentupperlim:=currentupperlim+dx:<br>od:<br>for j from 1 to k do<br>linelist:=[op(linelist),[xmin + (j-1)*dx,0]]:<br>linelist:=[op(linelist),[xmin + (j-1)*dx,op(j,result)/leng]]:<br>linelist:=[op(linelist),[xmin + j*dx,op(j,result)/leng]]:<br>linelist:=[op(linelist),[xmin + j*dx,0]]:<br>od:<br>plot(linelist,style=LINE); <br>end:<br>f(k,sorteddata,xmin,dx,xmax):<br>end:Areabargraph:=proc(data,xmin,xmax,k)<br>local sorteddata, dx, lines,graphicslist, f: <br>sorteddata:=[]:<br>dx:=(xmax-xmin)/k:<br>lines:=[]:<br>graphicslist:=[]:<br>sorteddata:=sort(data):<br>if ((op(1,sorteddata)&lt;xmin) or (op(nops(sorteddata),sorteddata)&gt;xmax))<br>then<br>lprint(`Note: some data values lie outside the user-defined interval.`)<br>fi:<br>f:=proc(k,sorteddata,xmin,dx,xmax,lines::evaln)<br>local i,j,currentupperlim,leng,index,counter,result,<br>finallist,q,numb,linelist:<br>finallist:=[]:<br>linelist:=[]:<br>index:=1:<br>leng:=nops(sorteddata):<br>currentupperlim:=xmin+dx:<br>result:=[]:<br>for q from 1 to leng do<br>if ((op(q,sorteddata)&gt;=xmin) and (op(q,sorteddata)&lt;=xmax)) <br>then finallist:=[op(finallist),op(q,sorteddata)]<br>fi:<br>od:<br>numb:=nops(finallist):<br>for i from 1 to k do<br>counter:=0:<br>while ((index&lt;=numb) and (op(index,finallist)&lt;=currentupperlim)) do<br>counter:=counter+1:<br>index:=index+1:<br>od:<br>result:=[op(result),counter]:<br>currentupperlim:=currentupperlim+dx:<br>od:<br>for j from 1 to k do<br>linelist:=[op(linelist),[xmin + (j-1)*dx,0]]:<br>linelist:=[op(linelist),[xmin + (j-1)*dx,op(j,result)/(leng*dx)]]:<br>linelist:=[op(linelist),[xmin + j*dx,op(j,result)/(leng*dx)]]:<br>linelist:=[op(linelist),[xmin + j*dx,0]]:<br>od:<br>lines:=linelist: <br>end:<br>f(k,sorteddata,xmin,dx,xmax,lines):<br>plot(lines,style=LINE);<br>end:<br><br>Analysis:=proc(L)<br>local m,v,sd,k,S,i,j,l;<br>m:=0;<br>v:=0;<br>sd:=0;<br>for k from 1 to nops(L)<br>do <br>m:=m+L[k];<br>od;<br>m:=evalf(m/nops(L));<br>for i from 1 to nops(L)<br>do <br>v:=v+(L[i]-m)^2;<br>od;<br>v:=evalf(v/nops(L));<br>sd:=evalf(sqrt(v));<br>[m,v,sd];<br>end:<br><br>Histogram:=proc(d,n)<br>local list1,j1,j2,A,ml,mh,sl,sh,Al,Ah,L;<br>L:=list1;<br>Al:=Analysis(d);<br>ml:=Al[1];<br>sl:=Al[3];<br>lprint("the Mean is",ml);<br>lprint("the Standard deviation is",sl);<br>lprint("A histogram looks like");<br>Areabargraph(d,ml-max(abs(ml-min(op(d))),abs(ml-max(op(d)))),<br>ml+max(abs(ml-min(op(d))),abs(ml-max(op(d)))),n); <br>end: <br><br> "You will need to go to the flipping program (we will use the ManyToss program) and you will need to go to the histogram progrm (we will use the<br>Histogram progrm). Hit return in order to load the following packages.":<br><br>with(plots):<br>with(stats): </font></b></p><p align=left><tt><pre><font color=#0000FF size=2>Warning, these names have been redefined: anova, describe, fit, importdata, random, statevalf, statplots, transform<br></font></pre></tt></p><p align=left><tt><pre><font color=#0000FF size=2>Warning, these names have been redefined: boxplot, histogram, scatterplot, xscale, xshift, xyexchange, xzexchange, yscale, yshift, yzexchange, zscale, zshift<br></font></pre></tt></p><p align=left><tt><pre><font color=#0000FF size=2>Warning, the name changecoords has been redefined<br></font></pre></tt></p><p align=left><tt><pre><font color=#0000FF size=2>Warning, these names have been redefined: anova, describe, fit, importdata, random, statevalf, statplots, transform<br></font></pre></tt></p><p align=left><tt>&gt; </tt><b><font color=#FF0000>"Here we have a program that flips a fair coin n times":<br><br>with(stats):<br><br>CoinToss:=proc(n)<br>local T,i,L;<br>T:=[];<br>L:=[random[empirical[.5,.5]](n)];<br>for i from 1 to n<br>do<br>T:=[op(T),2*(L[i]-3/2)];<br>od;<br>T;<br>end:<br><br>"Here we have a program that gives the running total of a list of numbers":<br><br>RunTotal:=proc(L)<br>local n,T,V,i;<br>n:=nops(L);<br>T:=[];<br>V:=0;<br>for i from 1 to n<br>do<br>V:=V+L[i];<br>T:=[op(T),V];<br>od;<br>T;<br>end:<br><br>"Here we have a program that perform the follwing experiment m times: take a coin and flip it n times and records the total.":<br><br><br>ManyToss:=proc(n,m)<br>local i,T;<br>T:=[];<br>for i from 1 to m<br>do<br>T:=[op(T),RunTotal(CoinToss(n))[n]];<br>od;<br>T;<br>end:<br><br>"The only new program here is a program wich makes a linear change to the elements of a list. We will use it to standardize a sum.":<br><br><br>Modify:=proc(L,u,c)<br>local i,H;<br>H:=[];<br>for i from 1 to nops(L) <br>do <br>H:=[op(H),evalf(c*(L[i]-u))];<br>od;<br>H;<br>end:<br><br><br><br>"Open and run the the Flipping program! This is because the Streaks program uses data produced by the CoinToss program and MaxStreaks uses the<br>program itself.": <br><br><br>"Here is a program that takes a coin flip list (Produced by CoinToss) and lists all the streak totals associted to the list.": <br><br>with(stats):<br><br>Streaks:=proc(L)<br>local n,R,t,k;<br>R:=[];<br>t:=1;<br>n:=nops(L);<br>for k from 2 to n<br>do<br>if<br>L[k] = L[k-1] <br>then <br>t:=t+1;<br>fi;<br>if L[k] &lt;&gt; L[k-1] <br>then <br>R:=[op(R),t] ;<br>t:=1;<br>fi;<br>od;<br>[op(R),t];<br>end:<br><br>"Here we have a program that perform the follwing experiment m times: take a coin and flip it n times and record the longest streak each time.":<br><br>MaxStreak:=proc(n,m)<br>local i,T;<br>T:=[];<br>for i from 1 to m<br>do<br>T:=[op(T),max(op(Streaks(CoinToss(n))))];<br>od;<br>T;<br>end: <br><br><br></font></b></p><p align=left><tt><pre><font color=#0000FF size=2>Warning, these names have been redefined: anova, describe, fit, importdata, random, statevalf, statplots, transform<br></font></pre></tt></p><p align=left><tt><pre><font color=#0000FF size=2>Warning, these names have been redefined: anova, describe, fit, importdata, random, statevalf, statplots, transform<br></font></pre></tt></p><p align=left><tt>&gt; </tt><b><font color=#FF0000>MS1:=MaxStreak(14,2000):<br><br>Histogram(MS1,9);</font></b></p><p align=left><tt><pre><font color=#0000FF size=2>"the Mean is", 4.131500000</font></pre></tt></p><p align=left><tt><pre><font color=#0000FF size=2>"the Standard deviation is", 1.491712958</font></pre></tt></p><p align=left><tt><pre><font color=#0000FF size=2>"A histogram looks like"</font></pre></tt></p><p align=center><img src="http://www.math.dartmouth.edu/~m60s02/temps/CLT/CLTStreak1.gif" width=337 height=250 alt="[Maple Plot]"></p><p align=left><tt>&gt; </tt><b><font color=#FF0000>SumIt:=proc(L)<br>local i,A;<br>A:=0;<br>for i from 1 to nops(L)<br>do<br>A:=A+L[i];<br>od;<br>A;<br>end:<br><br>Modify2:=proc(L,u,s,N)<br>local i,H;<br>H:=[];<br>for i from 1 to nops(L) <br>do <br>H:=[op(H),evalf((L[i]-u)/(sqrt(N)*s))];<br>od;<br>H;<br>end:<br><br>Exper:=proc(n,N,m,u,s)<br>local H,i;<br>H:=[];<br>for i from 1 to m<br>do<br>H:=[op(H),SumIt(Modify2(MaxStreak(n,N),u,s,N))];<br>od;<br>H;<br>end:<br><br></font></b></p><p align=left><tt>&gt; </tt><b><font color=#FF0000>E2:=Exper(14,100,500,4.13,1.5):<br></font></b></p><p align=left><tt>&gt; </tt><b><font color=#FF0000>H2:=Histogram(E2,11):<br><br>Nor:=plot((1/(sqrt(2*Pi)))*exp(-x^2/(2)),x =-3..3,color=blue):<br><br>display(H2,Nor);</font></b></p><p align=left><tt><pre><font color=#0000FF size=2>"the Mean is", .8493333364e-1</font></pre></tt></p><p align=left><tt><pre><font color=#0000FF size=2>"the Standard deviation is", .9723166512</font></pre></tt></p><p align=left><tt><pre><font color=#0000FF size=2>"A histogram looks like"</font></pre></tt></p><p align=center><img src="http://www.math.dartmouth.edu/~m60s02/temps/CLT/CLTStreak2.gif" width=337 height=250 alt="[Maple Plot]"></p><p align=left><tt>&gt; </tt><b><font color=#FF0000>MS1:=MaxStreak(200,2000):<br><br></font></b></p><p align=left><tt>&gt; </tt><b><font color=#FF0000>Histogram(MS1,11); </font></b></p><p align=left><tt><pre><font color=#0000FF size=2>"the Mean is", 7.984500000</font></pre></tt></p><p align=left><tt><pre><font color=#0000FF size=2>"the Standard deviation is", 1.832555464</font></pre></tt></p><p align=left><tt><pre><font color=#0000FF size=2>"A histogram looks like"</font></pre></tt></p><p align=center><img src="http://www.math.dartmouth.edu/~m60s02/temps/CLT/CLTStreak3.gif" width=337 height=250 alt="[Maple Plot]"></p><p align=left><tt>&gt; </tt><b><font color=#FF0000>Data:=[5,7,6,5,6,7,4,3,5,5,4,7,5,5,7,5,5,8,9,7,6,17,5,3,6,9,7,5,5,6,4,7,7,6,14,4,6,8,6,4];<br><br>Histogram(Data,9);<br><br></font></b></p><p align=center><img src="http://www.math.dartmouth.edu/~m60s02/temps/CLT/CLTStreak4.gif" width=513 height=13 alt="Data := [5, 7, 6, 5, 6, 7, 4, 3, 5, 5, 4, 7, 5, 5, ..."></p><p align=left><tt><pre><font color=#0000FF size=2>"the Mean is", 6.250000000</font></pre></tt></p><p align=left><tt><pre><font color=#0000FF size=2>"the Standard deviation is", 2.576334606</font></pre></tt></p><p align=left><tt><pre><font color=#0000FF size=2>"A histogram looks like"</font></pre></tt></p><p align=center><img src="http://www.math.dartmouth.edu/~m60s02/temps/CLT/CLTStreak5.gif" width=337 height=250 alt="[Maple Plot]"></p><p align=left><tt>&gt; </tt><b><font color=#FF0000>E2:=Exper(200,40,100,7.95,1.7):<br><br></font></b></p><p align=left><tt>&gt; </tt><b><font color=#FF0000>H2:=Histogram(E2,7):<br><br>Nor:=plot((1/(sqrt(2*Pi)))*exp(-x^2/(2)),x =-4..4,color=blue):<br><br>display(H2,Nor);</font></b></p><p align=left><tt><pre><font color=#0000FF size=2>"the Mean is", -.5394473701e-1</font></pre></tt></p><p align=left><tt><pre><font color=#0000FF size=2>"the Standard deviation is", .9974170794</font></pre></tt></p><p align=left><tt><pre><font color=#0000FF size=2>"A histogram looks like"</font></pre></tt></p><p align=center><img src="http://www.math.dartmouth.edu/~m60s02/temps/CLT/CLTStreak6.gif" width=337 height=250 alt="[Maple Plot]"></p><p align=left><tt>&gt; </tt><b><font color=#FF0000>evalf((250-40*7.9)/(sqrt(40)*1.7));</font></b></p><p align=center><img src="http://www.math.dartmouth.edu/~m60s02/temps/CLT/CLTStreak7.gif" width=83 height=13 alt="-6.138538985"></p></basefont></body></html>